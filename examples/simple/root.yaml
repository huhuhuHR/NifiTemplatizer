name: root

dependencies:
  org.apache.nifi:
    nifi-http-context-map-nar:
      1.8.0:
        StandardHttpContextMap: org.apache.nifi.http.StandardHttpContextMap
    nifi-standard-nar:
      1.8.0:
        HandleHttpRequest: org.apache.nifi.processors.standard.HandleHttpRequest
        HandleHttpResponse: org.apache.nifi.processors.standard.HandleHttpResponse
        LogAttribute: org.apache.nifi.processors.standard.LogAttribute
    nifi-update-attribute-nar:
      1.8.0:
        UpdateAttribute: org.apache.nifi.processors.attributes.UpdateAttribute

controllers:
- name: StandardHttpContextMap
  id: e148ee71-74e6-387e-9009-8c291cfe5b92
  properties:
    Maximum Outstanding Requests: 500

components:
- name: Remote Input
  type: INPUT_PORT
  id: a2a91b0f-fe85-39b7-616f-e151d56f883e
  position: 2502,706

- name: Remote out
  type: OUTPUT_PORT
  id: 2ba83dc5-4b22-38f0-6113-aeb5a2acd909
  position: 3123,1541
  inputs:
  - source: bbfb5e15-016c-1000-24e9-c7827e34b838
    from:
    - Output1

- name: HandleHttpRequest
  type: HandleHttpRequest
  id: aa1f6a5f-0f1e-37fe-12d9-67edf84558ca
  position: 1456,724
  properties:
    HTTP Context Map: e148ee71-74e6-387e-9009-8c291cfe5b92

- name: UpdateAttribute@2
  type: UpdateAttribute
  id: 5947ea14-3369-39b5-4c32-c020072f1cdf
  position: 1978,745
  inputs:
  - source: aa1f6a5f-0f1e-37fe-12d9-67edf84558ca
    from:
    - success

- name: HandleHttpResponse
  type: HandleHttpResponse
  id: fc21ff2e-bb6b-36f2-ad25-693765feb650
  position: 3636,1262
  properties:
    HTTP Context Map: e148ee71-74e6-387e-9009-8c291cfe5b92
    HTTP Status Code: 200
  inputs:
  - source: 0ed325fb-3d55-3935-0a0a-7f6c0ea15913
    from:
    - success

- name: UpdateAttribute
  type: UpdateAttribute
  id: 5469f8d8-a039-38e6-a49c-edfef4c0bc7c
  position: 2441,953
  comment: This is a comment about how UpdateAttribute works.
  properties:
    Store State: Store state locally
    newAttribute: ${uuid}
    test: asdf
  styles:
    background-color: '#e02020'
  inputs:
  - source: a2a91b0f-fe85-39b7-616f-e151d56f883e
  - source: 5947ea14-3369-39b5-4c32-c020072f1cdf
    from:
    - success
  advanced:
    policy: USE_CLONE
    rules:
    - conditions:
      - ${asdf2:equals("true")}
      - ${asdf:equals("true")}
      actions:
        newValue: asdf!
    - conditions:
      - ${asdf2:equals("false")}
      actions:
        otherValue: asdf@

- name: LogAttribute
  type: LogAttribute
  id: 0ed325fb-3d55-3935-0a0a-7f6c0ea15913
  position: 3155,1238
  inputs:
  - source: bbfb5e15-016c-1000-24e9-c7827e34b838
    from:
    - Output1
  - source: 92136135-3d3f-33bd-739f-74b2d994e73e
    from:
    - Funnel
  - source: 5469f8d8-a039-38e6-a49c-edfef4c0bc7c
    from:
    - set state fail
    - success
    properties:
      backPressureObjectThreshold: 10
      prioritizers:
      - org.apache.nifi.prioritizer.OldestFlowFileFirstPrioritizer
      - org.apache.nifi.prioritizer.PriorityAttributePrioritizer
    position:
    - 3065,922
    - 3325,1017

- name: RemoteLogAttribute
  type: LogAttribute
  id: 78e2ba79-a996-3df8-ce69-3c4aab72c1c0
  position: 3092,1668
  inputs:
  - source: d8323ec6-bbe8-3f22-5bd0-2df7f8d6dd2b
    from:
    - Remote out

- type: FUNNEL
  id: 92136135-3d3f-33bd-739f-74b2d994e73e
  position: 2906,1158
  inputs:
  - source: 5469f8d8-a039-38e6-a49c-edfef4c0bc7c
    from:
    - set state fail
    - success
  - source: bbfb5e15-016c-1000-24e9-c7827e34b838
    from:
    - Output2

- type: LABEL
  id: dc64abc3-244f-32d9-ec0f-a3e16f119540
  position: 1901,1147
  comment: |
    Test label
  styles:
    height: 150
    width: 150

- name: Test
  type: PROCESS_GROUP
  id: bbfb5e15-016c-1000-24e9-c7827e34b838
  template: bbfb5e15-016c-1000-24e9-c7827e34b838.yaml
  position: 2416,1301
  comment: dsfgsdfg
  inputs:
  - source: 5469f8d8-a039-38e6-a49c-edfef4c0bc7c
    from:
    - success
    to: Input1
    position:
    - 2036,1358

- name: NiFi Flow
  type: REMOTE_PROCESS_GROUP
  id: d8323ec6-bbe8-3f22-5bd0-2df7f8d6dd2b
  position: 2406,1635
  properties:
    protocol: HTTP
    targetUris: http://localhost:8080/nifi
  inputs:
  - source: bbfb5e15-016c-1000-24e9-c7827e34b838
    from:
    - Output1
    to: Remote Input
